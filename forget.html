<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="數享秉持綠能永續經營理念，成為提供差異化服務的世界級RMN公司。我們致力於協助企業追求最高的利潤及成長，幫助企業轉型，規劃並建置完善的跨平台行銷。" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="js/loading.js"></script>
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/sweetalert2.css">
  <link rel="stylesheet" href="css/layout.css" type="text/css">
  <link rel="stylesheet" href="css/mediaApply.css">
  <link rel="stylesheet" href="css/login.css" type="text/css">
  <title>忘記密碼</title>
</head>
<body>
  <div id="main">
    <div class="middle">
      <div class="left"></div>
      <div class="right">
        <div class="top">
          <img src="img/index/user.svg" alt="">
          <p class="title">密碼重設</p>
        </div>
          <p class="account">
            <input type="text" class="account" placeholder="請輸入手機或電子信箱">
          </p>
          <p class="password text">
            <input type="password" class="password first" placeholder="請輸入密碼">
            <i class="fa-solid fa-eye-slash"></i>
            <i class="fa-solid fa-eye"></i>
          </p>
          <p class="password again">
            <input type="password" class="password again" placeholder="請再次確認密碼">
            <i class="fa-solid fa-eye-slash"></i>
            <i class="fa-solid fa-eye"></i>
          </p>
          <div class="btn purple">重設密碼</div>
          <div class="flex end">
            <span>記起密碼?</span>
            <a href="index.html">立即登入</a>
          </div>
      </div>
    </div>
  </div>
  <script>
    $(document).ready(function () {
      let H = $(window).height();
      let W = $(window).width();

      if ($(window).width() < 600) {
        let H = $(window).height();
        $('body').height(H - 10);
      }

      $('input.account').change(function(){
        if ($('input.account').val() === '') {
          $('p.password').addClass('show');
        }else if (!$('input.account').val().match(/[0-9]/) && !$('input.account').val().match(/[a-zA-Z]/)) {
          $('p.account').addClass('text');
        }else if( $('input.account').val().match(/[a-zA-Z]/) && !$('input.account').val().match(/(\w)+[@]{1}(\S)+[.]{1}(\D)+/) ){
          $('p.account').addClass('email');
        }else if( $('input.account').val().match(/[0-9]/) && !$('input.account').val().match(/09\d{8}/)  ){
          $('p.account').addClass('num');
        }else{
          $('p.account').removeClass('show text email num');
        }
      });

      $('input.password').change(function () {
        if ($('input.password').val() === '') {
          $('p.password').addClass('show');
        } else if ($('input.password').val() !== '') {
          $('p.password').removeClass('show');
        } 
      });

      $('input.password.first').change(function () {
        if (6 > $(this).val().length) {
          $('p.password.text').addClass('atless');
        } else {
          $('p.password.text').removeClass('atless');
        }
      });

      $('input.password.again').change(function () {
        if ($(this).val() !== $('input.password.first').val()) {
          $('p.password.again').addClass('atless');
        } else {
          $('p.password.again').removeClass('atless');
        }
      });

      $('input.validate').change(function () {
        if ($('input.validate').val() !== '') {
          $('p.validate').removeClass('show');
        } else {
          $('p.validate').addClass('show');
        }
      });
      $('i.fa-eye-slash').click(function(){
        $(this).hide();
        $(this).siblings('i.fa-eye').show();
        $(this).siblings('input').attr('type','text');
      });

      $('i.fa-eye').click(function(){
        $(this).hide();
        $(this).siblings('i.fa-eye-slash').show();
        $(this).siblings('input').attr('type','password');
      });
      function verify() {
        if ($('input.account').val() === '') {
          $('p.account').addClass('show');
        } else if (!$('input.account').val().match(/[0-9]/) && !$('input.account').val().match(/[a-zA-Z]/)) {
          $('.account').addClass('text');
        }else if( $('input.account').val().match(/[a-zA-Z]/) && !$('input.account').val().match(/(\w)+[@]{1}(\S)+[.]{1}(\D)+/) ){
          $('.account').addClass('email');
        }else if( $('input.account').val().match(/[0-9]/) && !$('input.account').val().match(/09\d{8}/) ){
          $('.account').addClass('num');
        }else if ($('input.password.first').val() === '') {
          $('p.password.text').addClass('show');
        } else if (6 > $('input.password.first').val().length) {
          $('p.password.text').addClass('atless');
        } else if ($('input.password.again').val() === '') {
          $('p.password.again').addClass('show');
        } else if ($('input.password.again').val() !== $('input.password.first').val()) {
          $('p.password.again').addClass('atless');
        } else {
          Swal.fire({
            title: '密碼已重設',
            text: '請重新登入系統',
            icon: 'success',
            showConfirmButton: true // Now waiting for the user to click the confirm button
          }).then((result) => {
            if (result.isConfirmed) { // Checks if the confirm button was clicked
              window.location = "https://yowru.github.io/CMS/index.html";
            }
          });
        }
      }

      $(document).keyup(function (event) {
        if (event.which === 13) {
          verify();
        }
      });

      $('.btn.purple').click(function () {
        verify();
      });


    });
  </script>
</body>

</html>
